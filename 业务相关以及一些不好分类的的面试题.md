# `什么是SKU、SPU，你们是怎么设计的？`
**SPU:标准化产品单元**   
spu是商品信息聚合的最小单位，也就是一组商品的特征信息或者说关键属性，但是和库存无关，比如手机的CPU、电池容量等信息。
**SKU：库存量单元(具体规格单品)**  
sku属性就是会影响到库存和价格的属性, 又叫销售属性，与商品是多对一的关系。 比如颜色、内存大小之类的。  
**表设计相关**     
在设计时，SPU可单独也可以直接与商品绑定，如果是JD这类的话肯定单独设计了。  
商品分类表--mmall_category  
商品表--------mmall_product  （也称spu表）  
商品规格表--mmall_product_specs （也称sku表）  
属性key表---mmall_attribute_key  
属性value表-mmall_attribute_value  
> 参考资料：https://www.jianshu.com/p/86f9596d6234

# `(完善中，写的不咋地)如何找出项目性能瓶颈？`
为了确定项目性能瓶颈，一般会对项目进行压测，简易模拟真实环境(包括服务配置的)。在压测钱一定要做好日志，分布式系统做好做全链路监控，可以很好找到其中性能差的一环。
>  互联网架构，如何进行容量设计？  https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959542&idx=1&sn=2494bbea9a855e0e1c3ccd6d2562a600&scene=0#rd   
 
一般压测之后会出现以下情况： 
1. 查看错误日志，如果有的话，应该是最直观的了。 
2. 网络瓶颈，看看网络带宽是否打满没。
3. 吞吐率低，CPU高，其余指标正常。   
分析建议：请求数不大，但是CPU繁忙，判断应用程序代码，如创建实体类对象的时候耗内存，或者资源使用完成不及时关闭，长时间运行，容易导致内存泄露。  
4. 每秒请求数曲线和吞吐率曲线不大致相似，其余正常  
分析建议：每秒请求数和吞吐率为正比关系，吞吐率过低，表示服务器虽然能够接受服务器的请求，但返回结果较慢，可能是程序处理缓慢，此外其余参数指标正常，可判断应用程序出现问题。  
5. CPU和内存不断增长，但其余值正常  
分析建议：系统资源被征用，用完不释放，长此以往，内存泄露。  
6. 数据库瓶颈

**出现CPU瓶颈症状**
工具有`top`命令
1. CPU使用率超过90%，其余正常。
分析建议：处理器长期超负荷工作，该CPU不能满足当前压力，建议更换CPU或者升级配置。或者采用负载均衡。
2. ProcessorQueue Length 处理器队列长度总是不稳定，或者偏高。
分析建议：CPU处理效果不稳定，或者CPU处理有堵塞，建议更换CPU。
3. processor/%user time非核心操作消耗cpu的时间过大。
分析建议：结合CPU使用率分析，如果cpu使用频率正常，可优化算法，优化数据库语句降低该值。
**出现磁盘I/O瓶颈症状**
1. Avg.DiskQueue Length的值很高
分析建议：该值说明请求已经开始排队，服务器不能及时读取所有请求，建议更换读取速度更好的硬盘。
1. Avg.disksec/read的参考数值
分析建议：该值小于10ms，好。10ms-20ms，正常。20ms-50ms，需要重视。大于50ms，严重的磁盘I/O瓶颈
3. Avg.disksec/write的参考数值
参考Avg.disk sec/read的参考数值
4. %Disk time的参考数值
分析建议：一般该值处于60%—90%即可，超过90%，磁盘有瓶颈。
**数据库瓶颈**
一般是监控sql查询时间。如果sql执行时间普通比较长，比如插入、查询等，那么先分析sql是否有问题，sql没撒问题，同时数据量非常大的话就开始考虑分库分表了。